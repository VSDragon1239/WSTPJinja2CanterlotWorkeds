# Кантерлот WebServer на базе Python и Jinja2

Данный проект представляет собой учебный пример простого самописного веб-сервера, написанного на Python, с использованием:
- `http.server` — для обработки HTTP-запросов;
- `jinja2` — для шаблонизации HTML-страниц;
- `sqlite3` — для хранения данных о работниках.


## Структура проекта

```
.
├── main.py            # Основной исполняемый скрипт, веб-сервер
├── workers.db         # База данных SQLite (создаётся автоматически при первом запуске, если её нет)
└── templates
    ├── layout.html
    ├── index.html
    ├── workers_list.html
    ├── worker_form.html
    └── message.html
```

### Описание основных файлов:

1. **main.py**  
   Содержит код веб-сервера:
   - Логика маршрутизации (routes) в `do_GET` и `do_POST`:  
     - `GET /workers` — отобразить список работников  
     - `GET /workers/add` — показать форму для добавления нового работника  
     - `GET /workers/edit/<id>` — показать форму для редактирования работника  
     - `GET /workers/delete/<id>` — удалить работника  
     - `POST /workers/add` — отправка формы для добавления  
     - `POST /workers/edit/<id>` — отправка формы для редактирования  
   - Работа с базой данных (SQLite) через функции:  
     - `init_db()` — создание таблицы при первом запуске  
     - `get_all_workers()`, `get_worker_by_id()`, `add_worker()`, `update_worker()`, `delete_worker()`  
   - Вызов шаблонов с помощью Jinja2.

2. **workers.db**  
   Файл базы данных SQLite.

3. **templates/**  
   Папка с HTML-шаблонами Jinja2:
   - **layout.html** — базовый шаблон с шапкой, меню и подвалом страницы.  
   - **index.html** — главная страница.  
   - **workers_list.html** — список работников.  
   - **worker_form.html** — форма для добавления/редактирования работника.  
   - **message.html** — страница с сообщениями о результате действий (например, после добавления или удаления работника).

## Зависимости

- Python 3.x  
- [Jinja2](https://pypi.org/project/Jinja2/) (устанавливается через `pip`)  
- Встроенные модули Python: `sqlite3`, `http.server`, `urllib.parse`, `os`.

Установка необходимых библиотек:
```bash
pip install Jinja2
```

> Модуль `sqlite3` входит в стандартную библиотеку Python 3, поэтому отдельно устанавливать его не нужно.

## Запуск

1. Склонируйте (или загрузите) данный репозиторий к себе на компьютер.
2. Убедитесь, что установлены зависимости.
3. В корне проекта, где лежит файл `main.py`, выполните:
   ```bash
   python main.py
   ```
4. После запуска сервер будет доступен по адресу:
   ```
   http://127.0.0.1:8080
   ```

## Использование

- **Главная страница**: [http://127.0.0.1:8080/](http://127.0.0.1:8080/)  
  Отображает приветственное сообщение.
- **Список работников**: [http://127.0.0.1:8080/workers](http://127.0.0.1:8080/workers)  
  Отображает таблицу со всеми работниками.
- **Добавление работника**: [http://127.0.0.1:8080/workers/add](http://127.0.0.1:8080/workers/add)  
  Отображает форму для добавления нового работника. После отправки формы данные будут сохранены в базу.
- **Редактирование работника**:  
  Переход: `[http://127.0.0.1:8080/workers/edit/<id>]`.  
  Форма отображается для конкретного работника по его идентификатору.
- **Удаление работника**:  
  Переход: `[http://127.0.0.1:8080/workers/delete/<id>]`.  
  Удаляет работника с соответствующим ID и показывает страницу-уведомление.

## Лицензия

Данный проект распространяется свободно, без каких-либо гарантий. Используйте его для обучения и экспериментов.